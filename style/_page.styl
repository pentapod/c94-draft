@media screen
  body
    margin: auto 4rem
    padding-left: 240px
    padding-bottom: 4rem
    max-width: 800px
    font-size: 120%
    line-height: 170%
    // overflow-x: hidden

  h1
    margin: 8mm 0 2mm 0

  pre
    font-size: 120%;

  p
    text-align: initial

  ul
    margin-left: 40px

  section
    clear: both

  article, section
    margin-top: 5em

  figure
    margin: 2rem 0

  nav#toc
    position: fixed
    background-color: #ffffff
    top: 0
    bottom: 0
    left: 0
    overflow-y: scroll
    padding: 2rem 3rem
    width: 240px
    z-index: 1000

    .toc-title
      display: none

    li.article > a:hover
    li.introduction > a:hover
    li.postscript > a:hover
      background-color: rgba(0, 0, 0, 0.08)

  section#index
    display: none

  span.footnote
    background-color: #d9ffff

  a[data-ref="subsection"]
  a[data-ref="fig"]
    background-color: #ff8888
    color: #aa3333

  a[data-ref="subsection"]::before
    content: '--- 章'

  a[data-ref="fig"]::before
    content: '図 ---'

  a[data-ref="tbl"]::before
    content: '図 ---'

@media print
  :root
    widows: 3
    orphans: 3
    hyphens: auto

  // h1, h2, h3, h4, h5, h6
  //   color: #000000

  // table
  //   border-color: #000000

body
  page-break-before: left

h1, h2, h3, h4, h5, h6
  break-after: avoid

tr, th, td
  break-inside: avoid

pre
  widows: 4
  orphans: 4
  box-decoration-break: slice

section.chapter
  page-break-before: right
  page-break-after: always

section.chapter > h1
  page-break-after: always

section.chapter > article
  page-break-before: always
  page-break-after: always

section#index
  page-break-before: always
  page-break-after: always

.page-break
  width: 0
  height: 0
  page-break-after: always

@media print
  section.chapter
    h1, h2, h3
      margin-right: - $side-column-width
      clear: both

  // section.chapter,
  // nav#toc
  //   h2
  //     border-color: #000000

  table
    font-size: 90%

  span.footnote
    margin-right: $side-column-width + $page-margin-outer

  aside.cssdef
    width: 60%
    float: block-end
    float-reference: page
    margin-right: -10000px
    padding-right: 10000px + 20mm
    margin-left: 1.5rem

    .cssdef-region
      margin-right: -10000px
      padding-right: 10000px + 20mm

    // .title
    //   display: flex
    //   flex-direction: row
    //   flex-wrap: wrap
    //   align-items: flex-start

    h3
      font-size: 15px

  figure:not(.inplace)
    width: 50%
    float: inline-end
    float-reference: page
    margin: 1rem -10000px 1rem .6rem
    padding: .6rem
    padding-right: 10000px + 20mm
    background-color: #ffffff

    &.wide
      width: 75%

  figure.inplace
    margin: 1.6rem 0

    &.wide
      margin-right: - $side-column-width

  section.chapter .note
    padding: 1.4rem 100vw 1.4rem 100vw
    margin: 0.8rem -100vw

  nav#toc
    margin-right: - $side-column-width - 8mm
    column-count: 2
    column-gap: 16mm

    li.introduction
    li.article
    li.postscript
      break-inside: avoid

  section#index
    margin-right: - $side-column-width
    column-count: 3
    column-gap: 8mm

    li.index-item
      break-inside: avoid

  #postscript,
  #profile,
  #colophon
    margin-right: - $side-column-width

  #colophon
    margin-top: 10rem

h1, h2
  clear: both

@page
  size: $page-width $page-height
  page-extra-mixins()

  @bottom-left
    content: counter(page)
    font: $nombre-font
    margin-left: 8px
    color: black

@page :right
  margin: $page-margin-top 0 $page-margin-bottom $page-margin-inner
  padding-right: $side-column-width + $page-margin-outer

@page :left
  margin: $page-margin-top 0 $page-margin-bottom $page-margin-outer
  padding-right: $side-column-width + $page-margin-inner

@page :first
  margin-top: $page-margin-top - 5mm
  margin-bottom: 5mm

  @bottom-left
    content: ''
